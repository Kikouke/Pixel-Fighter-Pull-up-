<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jeu Combat</title>
  <link rel="stylesheet" href="index.css">
</head>
<body>
  <!-- Menu principal -->
  <div id="menu">
    <h1>Bienvenue dans le Combat 1vs1</h1>
    <button id="play-button">Play</button>
  </div>

  <!-- Histoire (initialement cachée) -->
  <div id="story" style="display: none;">
    <h1>Histoire</h1>
    <p>Dans une ville lointaine, deux combattants s'affrontent pour déterminer qui est le plus puissant. Le joueur, un guerrier en quête de gloire, a accepté le défi du mystérieux Bot, un adversaire redoutable construit pour vaincre. Qui remportera ce combat ? Vous allez le découvrir en affrontant cet adversaire impitoyable !</p>
    <button id="start-combat-button">Commencer le Combat</button>
  </div>

  <!-- Zone de jeu (initialement cachée) -->
  <div class="game-container" id="game-container" style="display: none;">
    <div id="header">
      <h1>Combat 1vs1</h1>
      <div class="round">Round: <span id="round-number">1</span></div>
      <div class="score">Score: <span id="player-score">0</span> - <span id="bot-score">0</span></div>
    </div>
    <div class="combat-area">
      <!-- Joueur -->
      <div id="player" class="fighter"></div>
      <div id="player-name" class="player-info">Joueur</div>
      <div id="player-hp" class="hp">HP: 100</div>

      <!-- Bot -->
      <div id="bot" class="fighter"></div>
      <div id="bot-name" class="player-info">Bot</div>
      <div id="bot-hp" class="hp">HP: 100</div>
    </div>

    <!-- Zone de texte pour les actions -->
    <div id="action-text" class="action-text">
      <p>Préparez-vous au combat !</p>
    </div>

    <!-- Boutons d'attaque -->
    <div class="combat-buttons">
      <button id="attack-button">Attaque</button>
      <button id="defend-button">Défendre</button>
      <button id="special-button">Spécial</button>
    </div>

    <!-- Bouton de retour au menu, caché au début -->
    <div id="restart-container" style="display: none;">
      <button id="restart-button">Retour au Menu</button>
    </div>
  </div>

  <script>
    let playerHP = 100;
    let botHP = 100;
    let round = 1;
    let playerScore = 0;
    let botScore = 0;

    // Lorsque le bouton "Play" est cliqué, afficher l'histoire
    document.getElementById('play-button').addEventListener('click', function() {
      document.getElementById('menu').style.display = 'none';
      document.getElementById('story').style.display = 'block';
    });

    // Lorsque le bouton "Commencer le Combat" est cliqué, commencer le combat
    document.getElementById('start-combat-button').addEventListener('click', function() {
      document.getElementById('story').style.display = 'none';
      document.getElementById('game-container').style.display = 'block';
      updateHP();
    });

    // Fonction pour mettre à jour les HP des personnages
    function updateHP() {
      document.getElementById('player-hp').textContent = 'HP: ' + playerHP;
      document.getElementById('bot-hp').textContent = 'HP: ' + botHP;
    }

    // Fonction pour afficher le texte des actions
    function displayActionText(text) {
      document.getElementById('action-text').innerHTML = `<p>${text}</p>`;
    }

    // Fonction pour gérer l'attaque du joueur
    document.getElementById('attack-button').addEventListener('click', function() {
      let damage = Math.floor(Math.random() * 20) + 10; // Dommages entre 10 et 30
      botHP -= damage;
      displayActionText(`Vous attaquez ! Vous infligez ${damage} dégâts à l'ennemi.`);
      updateHP();
      checkGameOver();
      botTurn();
    });

    // Fonction pour gérer la défense du joueur
    document.getElementById('defend-button').addEventListener('click', function() {
      let defense = Math.floor(Math.random() * 10) + 5; // Défense entre 5 et 15
      displayActionText(`Vous vous défendez ! Vous bloquez ${defense} points de dégâts.`);
      playerHP += defense; // Récupérer une partie des dégâts
      updateHP();
      checkGameOver();
      botTurn();
    });

    // Fonction pour gérer l'attaque spéciale du joueur
    document.getElementById('special-button').addEventListener('click', function() {
      let specialDamage = Math.floor(Math.random() * 40) + 20; // Dommages entre 20 et 60
      botHP -= specialDamage;
      displayActionText(`Vous utilisez une attaque spéciale ! Vous infligez ${specialDamage} dégâts à l'ennemi.`);
      updateHP();
      checkGameOver();
      botTurn();
    });

    // Fonction pour le tour du bot
    function botTurn() {
      let botAction = Math.random();
      let botDamage = Math.floor(Math.random() * 20) + 10; // Dommages entre 10 et 30
      if (botAction < 0.33) {
        playerHP -= botDamage;
        displayActionText(`Le bot attaque ! Il inflige ${botDamage} dégâts à vous.`);
      } else if (botAction < 0.66) {
        let botDefense = Math.floor(Math.random() * 10) + 5;
        playerHP += botDefense; // Le bot se défend
        displayActionText(`Le bot se défend ! Il bloque ${botDefense} dégâts.`);
      } else {
        let botSpecial = Math.floor(Math.random() * 40) + 20;
        playerHP -= botSpecial;
        displayActionText(`Le bot utilise son attaque spéciale ! Il inflige ${botSpecial} dégâts.`);
      }
      updateHP();
      checkGameOver();
    }

    // Fonction pour vérifier si le jeu est terminé
    function checkGameOver() {
      if (playerHP <= 0) {
        displayActionText("Vous avez perdu ! Le bot a gagné.");
        showRestartButton();
      } else if (botHP <= 0) {
        displayActionText("Vous avez gagné ! Le bot est vaincu.");
        showRestartButton();
      }
    }

    // Fonction pour afficher le bouton de retour au menu
    function showRestartButton() {
      document.getElementById('restart-container').style.display = 'block';
    }

    // Fonction pour réinitialiser le jeu
    document.getElementById('restart-button').addEventListener('click', function() {
      resetGame();
      document.getElementById('menu').style.display = 'block';
      document.getElementById('game-container').style.display = 'none';
    });

    function resetGame() {
      playerHP = 100;
      botHP = 100;
      round = 1;
      playerScore = 0;
      botScore = 0;
      updateHP();
      document.getElementById('restart-container').style.display = 'none';
    }
  </script>
</body>
</html>
